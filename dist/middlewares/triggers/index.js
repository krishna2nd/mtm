"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const MTMTrigger_1 = require("../../models/MTMTrigger");
const URL_BASE = "/triggers";
const mtmTrigger = new MTMTrigger_1.default();
exports.default = (app) => {
    app.get(URL_BASE, (req, res) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        res.json(yield MTMTrigger_1.default.getAll());
    }));
    app.get(`${URL_BASE}/:id`, (req, res) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        res.json(yield mtmTrigger.get(req.params.id));
    }));
    app.put(URL_BASE, (req, res) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        res.json(yield mtmTrigger.create(req.body));
    }));
    app.post(`${URL_BASE}/:id`, (req, res) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        const trigger = req.body;
        trigger.id = trigger.id || req.params.id || req.query.id;
        res.json(yield mtmTrigger.update(trigger));
    }));
    app.delete(`${URL_BASE}/:id`, (req, res) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        const trigger = req.body;
        trigger.id = trigger.id || req.params.id || req.query.id;
        res.json(yield mtmTrigger.delete(trigger));
    }));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbWlkZGxld2FyZXMvdHJpZ2dlcnMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsd0RBQXFFO0FBRXJFLE1BQU0sUUFBUSxHQUFXLFdBQVcsQ0FBQztBQUNyQyxNQUFNLFVBQVUsR0FBRyxJQUFJLG9CQUFVLEVBQUUsQ0FBQztBQUVwQyxrQkFBZSxDQUFDLEdBQUcsRUFBRSxFQUFFO0lBQ25CLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQU8sR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ2pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxvQkFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7SUFDdkMsQ0FBQyxDQUFBLENBQUMsQ0FBQztJQUNILEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxRQUFRLE1BQU0sRUFBRSxDQUFPLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUM1QyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sVUFBVSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDaEQsQ0FBQyxDQUFBLENBQUMsQ0FBQztJQUNILEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQU8sR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzlDLENBQUMsQ0FBQSxDQUFDLENBQUM7SUFDSCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBUSxNQUFNLEVBQUUsQ0FBTyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDN0MsTUFBTSxPQUFPLEdBQW1CLEdBQUcsQ0FBQyxJQUFzQixDQUFDO1FBQzNELE9BQU8sQ0FBQyxFQUFFLEdBQUcsT0FBTyxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN6RCxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sVUFBVSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQzdDLENBQUMsQ0FBQSxDQUFDLENBQUM7SUFDSCxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsUUFBUSxNQUFNLEVBQUUsQ0FBTyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDL0MsTUFBTSxPQUFPLEdBQW1CLEdBQUcsQ0FBQyxJQUFzQixDQUFDO1FBQzNELE9BQU8sQ0FBQyxFQUFFLEdBQUcsT0FBTyxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN6RCxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sVUFBVSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQzdDLENBQUMsQ0FBQSxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMifQ==